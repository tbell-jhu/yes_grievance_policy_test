---
title: "yes_grievance_test"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

## install packages if necessary
list.of.packages <- c("stringr", "tidytext", "googlesheets", "janitor", "dplyr")
new.packages <- list.of.packages[!(list.of.packages %in% installed.packages()[,"Package"])]
if(length(new.packages)) install.packages(new.packages)

library(dplyr)
library(stringr)
library(tidytext)
library(googlesheets)
library(janitor)
```


```{r read in data from google sheets}
#tkn <- gs_auth(new_user = TRUE)
#saveRDS(tkn, "data/tkn.rds")
gs_auth(token = "data/tkn.rds")
```

```{r}
gs_ls()
survey_sheet <- gs_title('YES Grievance TEST (Responses)')
report <- gs_read(survey_sheet) %>% 
          clean_names() %>%
          rename(incident = describe_incident_include_dates_and_locations_and_be_as_factual_as_possible)
colnames(report)
```


```{r find words}
data("stop_words")
words <- report %>%
  unnest_tokens(word, incident) %>%
  count(word, sort = TRUE) %>%
  ungroup() %>%
  anti_join(stop_words)

total_words <- words %>%
  group_by(word) %>%
  summarize(total = sum(n))

book_words <- left_join(words, total_words)

book_words
```

